<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>BadTracker</title>

  <!-- Meta tags pour PWA -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Application de suivi de match de badminton">
  <meta name="theme-color" content="#4a90e2">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="BadTracker">

  <!-- Liens vers le manifest et les icônes -->
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./icons/icon-72x72.png" type="image/png">
  <link rel="apple-touch-icon" href="./icons/icon-192x192.png">
  
  <!-- Splash screen pour iOS -->
  <link rel="apple-touch-startup-image" href="./icons/icon-512x512.png">

  <!-- Inclure Chart.js via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Inclure chartjs-plugin-datalabels via CDN (APRES Chart.js) -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <!-- Inclure jsPDF, jsPDF-AutoTable et html2canvas via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Notification mode hors ligne -->
  <div class="offline-indicator">Mode hors ligne activé</div>
  <!-- Invitation à installer l'app -->
  <div class="install-prompt" id="installPrompt">
    Installez BadTracker sur votre appareil !
    <button id="installButton">Installer</button>
  </div>

  <div class="main-content">
      <div class="controls">
          <h2>BadTracker</h2>
          <div class="score-board">
               <span id="scorePlayer1Container" class="player-score-container">
                  <span id="playerName1" class="player-name" title="Cliquez pour modifier">Joueur 1</span>
                  <input type="text" id="playerNameInput1" class="player-name-input" maxlength="15" style="display: none;">
                  <span id="setScorePlayer1">(0)</span>
                  <span id="scorePlayer1">0</span>
                </span>
                <span id="scorePlayer2Container" class="player-score-container">
                  <span id="scorePlayer2">0</span>
                  <span id="setScorePlayer2">(0)</span>
                  <span id="playerName2" class="player-name" title="Cliquez pour modifier">Joueur 2</span>
                  <input type="text" id="playerNameInput2" class="player-name-input" maxlength="15" style="display: none;">
                </span>
          </div>
          <button id="nextSetButton">Set Suivant &raquo;</button>
      </div>

      <div class="court-and-gauges-container">
          <div class="gauge-group player1-gauge-group">
              <h4 class="gauge-group-title">NIVEAU DE MAITRISE J1</h4>
              <div class="mastery-gauge player1-gauge">
                  <div class="gauge-bar-container">
                      <div id="cursorP1" class="gauge-cursor"></div>
                  </div>
                  <div class="gauge-labels-container">
                      <div class="gauge-label level-tres-satisfaisant">Maîtrise Très Satisfaisante</div>
                      <div class="gauge-label level-satisfaisant">Maîtrise Satisfaisante</div>
                      <div class="gauge-label level-fragile">Maîtrise Fragile</div>
                      <div class="gauge-label level-insufficient">Maîtrise Insuffisante</div>
                      <!-- Séparateurs pour alignement précis -->
                      <div class="gauge-separator sep-25"></div>
                      <div class="gauge-separator sep-50"></div>
                      <div class="gauge-separator sep-75"></div>
                  </div>
              </div>
          </div>
          <div id="courtArea">
              <svg id="badmintonCourt" width="670" height="305" viewBox="0 0 670 305" xmlns="http://www.w3.org/2000/svg">
                 <defs> <pattern id="netPattern" patternUnits="userSpaceOnUse" width="6" height="6"> <path d="M-1,1 l2,-2 M0,6 l6,-6 M5,7 l2,-2" stroke="rgba(150, 150, 150, 0.8)" stroke-width="0.7"/> </pattern> </defs> <rect x="102" y="85.5" width="134" height="134" fill="#ffcccc" stroke="gray" stroke-width="1" /> <rect x="434" y="85.5" width="134" height="134" fill="#ffcccc" stroke="gray" stroke-width="1" /> <rect x="0" y="0" width="670" height="305" fill="none" stroke="black" stroke-width="2" /> <line x1="335" y1="0" x2="335" y2="305" stroke="black" stroke-width="2" stroke-dasharray="10,5" /> <line x1="236" y1="0" x2="236" y2="305" stroke="black" stroke-width="2" /> <line x1="434" y1="0" x2="434" y2="305" stroke="black" stroke-width="2" /> <line x1="0" y1="23" x2="335" y2="23" stroke="black" stroke-width="2" /> <line x1="0" y1="282" x2="335" y2="282" stroke="black" stroke-width="2" /> <line x1="0" y1="152.5" x2="236" y2="152.5" stroke="black" stroke-width="2" /> <line x1="335" y1="23" x2="670" y2="23" stroke="black" stroke-width="2" /> <line x1="335" y1="282" x2="670" y2="282" stroke="black" stroke-width="2" /> <line x1="434" y1="152.5" x2="670" y2="152.5" stroke="black" stroke-width="2" /> <line x1="23" y1="0" x2="23" y2="305" stroke="black" stroke-width="2" /> <line x1="647" y1="0" x2="647" y2="305" stroke="black" stroke-width="2" /> <rect x="312.5" y="0" width="22.5" height="305" fill="rgba(200, 200, 200, 0.7)" /> <rect x="312.5" y="0" width="22.5" height="305" fill="url(#netPattern)" /> <rect x="335" y="0" width="22.5" height="305" fill="rgba(200, 200, 200, 0.7)" /> <rect x="335" y="0" width="22.5" height="305" fill="url(#netPattern)" /> <line x1="312.5" y1="0" x2="312.5" y2="305" stroke="black" stroke-width="1" stroke-dasharray="4,4" /> <line x1="357.5" y1="0" x2="357.5" y2="305" stroke="black" stroke-width="1" stroke-dasharray="4,4" />
              </svg>
              <div id="markersOverlay"></div>
          </div>
           <div class="gauge-group player2-gauge-group">
              <h4 class="gauge-group-title">NIVEAU DE MAITRISE J2</h4>
              <div class="mastery-gauge player2-gauge">
                  <div class="gauge-bar-container">
                      <div id="cursorP2" class="gauge-cursor"></div>
                  </div>
                  <div class="gauge-labels-container">
                      <div class="gauge-label level-tres-satisfaisant">Maîtrise Très Satisfaisante</div>
                      <div class="gauge-label level-satisfaisant">Maîtrise Satisfaisante</div>
                      <div class="gauge-label level-fragile">Maîtrise Fragile</div>
                      <div class="gauge-label level-insufficient">Maîtrise Insuffisante</div>
                       <!-- Séparateurs pour alignement précis -->
                      <div class="gauge-separator sep-25"></div>
                      <div class="gauge-separator sep-50"></div>
                      <div class="gauge-separator sep-75"></div>
                  </div>
              </div>
          </div>
      </div>
      <div class="charts-and-buttons-row">
           <div class="chart-wrapper" id="chartWrapperP1">
                <h3 id="chartTitlePlayer1">[J1] Joueur 1 - Analyse</h3>
                <canvas id="chartPlayer1"></canvas>
            </div>
            <div class="action-buttons-container">
                <button id="undoButton" disabled><span>Annuler</span></button>
                <button id="resetButton">Réinitialiser</button>
                <div class="timer-container">
                    <div id="timerDisplay">00:00</div>
                    <div class="timer-controls">
                        <button id="timerStartPauseButton">▶️ Start</button>
                        <button id="timerResetButtonTimer">⏹️ Reset</button>
                    </div>
                    <div class="timer-limit-container">
                        <label for="timerLimitInput">Limite (min):</label>
                        <input type="number" id="timerLimitInput" min="0" step="1" placeholder="Aucune">
                    </div>
                </div>
                <button id="exportPdfButton">Exporter les stats</button>
                <!-- COPYRIGHT NOTICE: Ajout du texte -->
                <div id="copyright-notice">
                    by NUMEPS<br>
                    tous les droits réservés
                </div>
            </div>
           <div class="chart-wrapper" id="chartWrapperP2">
               <h3 id="chartTitlePlayer2">[J2] Joueur 2 - Analyse</h3>
               <canvas id="chartPlayer2"></canvas>
            </div>
      </div>
  </div>
  <script src="js/main.js"></script>
  <!-- Registre du service worker -->
  <script src="./register-sw.js"></script>
</body>
</html>
